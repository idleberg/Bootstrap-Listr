var column=$("#file-count").index(),striped_bg=$(".table-striped > tbody > tr:nth-of-type(odd)").css("background-color"),hover_bg,stripedRows=function(){$("#listr-table").has(".table-striped")&&($("tbody tr").css("background-color","inherit"),$("tbody tr:not(.hidden):even").css("background-color",striped_bg))},countRows=function(){var o=$("tbody tr:not(.hidden)").length;console.log("items:"+o),o>1&&($("tbody tr:not(.hidden) > td:nth-of-type("+column+"1)").each(function(o,t){o+=1,$(this).text(o)}),stripedRows())};countRows(),$(".table-hover>tbody>tr").bind({mouseenter:function(o){hover_bg||($(this).removeAttr("style"),hover_bg=$(this).css("background-color")),$(this).css("background-color",hover_bg)},mouseleave:function(o){stripedRows()}});
"undefined"!=typeof Dropbox&&$(".save-dropbox").click(function(e){e.preventDefault();var o=$(this).get(0).href;Dropbox.save(o)});
var hidden=$("tr.hidden");$(document).bind("keydown",function(e){e.altKey&&$(hidden).addClass("reveal").removeClass("hidden"),countRows()}).bind("keyup",function(){$(hidden).removeClass("reveal").addClass("hidden"),countRows()}),$(document).bind("keyup",function(e){70===e.which&&$("#listr-search").focus(),viewer.hasClass("in")&&(32===e.which&&(e.preventDefault(),player.paused===!1?player.pause():player.play()),37===e.which&&(player.currentTime-=1),39===e.which&&(player.currentTime+=1),37===e.which&&e.shiftKey&&(player.currentTime=0),38===e.which&&(player.volume+=.1),38===e.which&&e.shiftKey&&(player.volume=1),40===e.which&&(player.volume-=.1),40===e.which&&e.shiftKey&&(player.volume=0))});
function set_modal(e,t,o,a){modal_body.html(e),full_view.attr("href",t),full_view.text(button),dropbox.attr("href",t),email.attr("href","mailto:?body="+o),twitter.attr("href","http://twitter.com/share?url="+o),facebook.attr("href","http://www.facebook.com/sharer/sharer.php?u="+o),google.attr("href","https://plus.google.com/share?url="+o),modal_title.text(decodeURIComponent(t)),a="undefined"!=typeof a?a:null,file_meta.text(a)}function set_vmodal(e,t,o,a){modal_body.html(e),full_view.attr("href",a),full_view.text(button),dropbox.attr("href",t),email.attr("href","mailto:?body="+encodeURIComponent(o)+"%20"+a),twitter.attr("href","http://twitter.com/share?text="+encodeURIComponent(o)+"&amp;url="+a),facebook.attr("href","http://www.facebook.com/sharer/sharer.php?u="+a),google.attr("href","https://plus.google.com/share?url="+a),modal_title.text(o),file_meta.html(a)}function modal_defaults(e,t){e.preventDefault();var o=t.attr("href"),a=t.get(0).href,i=t.data("modified");return[o,a,i]}function source_defaults(e,t){var o=modal_defaults(e,t),a=t.data("highlight");a!==!0&&$(".highlight").removeClass("hidden").removeAttr("disabled");var i=o[0].split(".").pop();return set_modal('<pre><code id="source" class="'+i+'" dir="ltr"></code></pre>',o[0],o[1],o[2]),[o[0],a]}var viewer=$("#viewer-modal"),modal_body=$(".modal-body"),modal_title=$(".modal-title"),file_meta=$("#file-meta"),full_view=$(".fullview"),button=full_view.data("button"),dropbox=$(".save-dropbox"),email=$(".email-link"),twitter=$(".twitter-link"),facebook=$(".facebook-link"),google=$(".google-link");$(".audio-modal").click(function(e){var t=modal_defaults(e,$(this));set_modal('<audio src="'+t[0]+'" id="player" autoplay controls>Your browser does not support the audio element.</audio>',t[0],t[1],t[2]),viewer.modal("show")}),$(".flash-modal").click(function(e){var t=modal_defaults(e,$(this));set_modal('<div class="embed-responsive embed-responsive-4by3"><object class="embed-responsive-item" type="application/x-shockwave-flash" data="'+t[0]+'"><param name="movie" value="'+t[0]+'"><param name="quality" value="high"></object></div>',t[0],t[1],t[2]),viewer.modal("show")}),$(".image-modal").click(function(e){var t=modal_defaults(e,$(this));set_modal('<img src="'+t[0]+'"/>',t[0],t[1],t[2]),viewer.modal("show")}),$(".pdf-modal").click(function(e){var t=modal_defaults(e,$(this));set_modal('<div class="embed-responsive embed-responsive-4by3"><iframe class="embed-responsive-item" src="'+t[0]+'" type="application/pdf" scale="aspect" frameborder="0"></iframe></div>',t[0],t[1],t[2]),viewer.modal("show")}),$(".video-modal").click(function(e){var t=modal_defaults(e,$(this));set_modal('<video src="'+t[0]+'" id="player" autoplay controls>Video format or MIME type is not supported</video>',t[0],t[1],t[2]),viewer.modal("show")}),$(".virtual-modal").click(function(e){e.preventDefault(),"undefined"!=typeof $(this).data("vimeo")?(file=$(this).html(),id=$(this).data("vimeo"),name=$(this).data("name"),uri=$(this).data("url"),set_vmodal('<div class="embed-responsive embed-responsive-16by9"><iframe id="virtual" class="embed-responsive-item" src="https://player.vimeo.com/video/'+id+'?autoplay=1&title=0&byline=0&portrait=0" frameborder="0" allowfullscreen>Video format or MIME type is not supported</iframe></div>',file,name,uri),viewer.modal("show")):"undefined"!=typeof $(this).data("youtube")?(file=$(this).html(),id=$(this).data("youtube"),name=$(this).data("name"),uri=$(this).data("url"),set_vmodal('<div class="embed-responsive embed-responsive-16by9"><iframe id="virtual" class="embed-responsive-item" src="https://www.youtube-nocookie.com/embed/'+id+'?autoplay=1&amp;rel=0&amp;showinfo=0" frameborder="0" allowfullscreen>Video format or MIME type is not supported</iframe></div>',file,name,uri),viewer.modal("show")):"undefined"!=typeof $(this).data("flickr")?(file=$(this).html(),id=$(this).data("flickr"),name=$(this).data("name"),uri=$(this).data("url"),set_vmodal('<div class="embed-responsive embed-responsive-1by1"><iframe id="virtual" class="embed-responsive-item" src="https://www.flickr.com/photos/'+id+'/player/" scrolling="no" frameborder="0" allowfullscreen></iframe></div>',file,name,uri),viewer.modal("show")):"undefined"!=typeof $(this).data("soundcloud")&&(file=$(this).html(),id=$(this).data("soundcloud"),name=$(this).data("name"),uri=$(this).data("url"),set_vmodal('<div class="embed-responsive embed-responsive-4by3"><iframe id="virtual" class="embed-responsive-item" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/'+id+'&amp;auto_play=true&amp;hide_related=true&amp;show_comments=false&amp;show_user=true&amp;show_reposts=false&amp;visual=true"></iframe></div>',file,name,uri),viewer.modal("show"))}),$(".quicktime-modal").click(function(e){var t=modal_defaults(e,$(this));set_modal('<div class="embed-responsive embed-responsive-16by9"><embed class="embed-responsive-item" src="'+t[0]+'" type="video/quicktime" controller="true" showlogo="false" scale="aspect"></div>',t[0],t[1],t[2]),viewer.modal("show")}),$(".source-modal").click(function(e){arr=source_defaults(e,$(this)),$.ajax(arr[0],{dataType:"text",success:function(e){$("#source").text(decodeURIComponent(e)),arr[1]===!0&&$("#source").each(function(e,t){"undefined"!=typeof hljs&&hljs.highlightBlock(t);var o=$("code").css("background-color");$("pre").css("background-color",o)})}}).done(function(){viewer.modal("show")})}),$(".source-modal-alt").click(function(e){arr=source_defaults(e,$(this)),$.ajax(arr[0],{dataType:"text",success:function(e){$("#source").text(decodeURIComponent(e)),arr[1]===!0&&$("#source").each(function(e,t){hljs.highlightBlock(t);var o=$("code").css("background-color");$("pre").css("background-color",o)})}}),viewer.modal("show")}),$(".highlight").click(function(e){e.preventDefault(),$(".highlight").attr("disabled","disabled"),$("#source").each(function(e,t){hljs.highlightBlock(t)});var t=$("code").css("background-color");$("pre").css("background-color",t)}),$(".text-modal").click(function(e){var t=modal_defaults(e,$(this));set_modal('<pre><code id="text"></code></pre>',t[0],t[1],t[2]),$.ajax(t[0],{dataType:"text",success:function(e){$("#text").text(decodeURIComponent(e))}}).done(function(){viewer.modal("show")})}),$(".text-modal-alt").click(function(e){var t=modal_defaults(e,$(this));set_modal('<pre><code id="text"></code></pre>',t[0],t[1],t[2]),$.ajax(t[0],{dataType:"text",success:function(e){$("#text").text(decodeURIComponent(e))}}),viewer.modal("show")}),viewer.on("hide.bs.modal",function(){var e=document.getElementById("player");e&&(e.pause(),e.src="")}),viewer.on("hidden.bs.modal",function(){$(".highlight").addClass("hidden"),$(".modal-body").empty()}),$(".website-modal").click(function(e){var t=modal_defaults(e,$(this));set_modal('<div class="embed-responsive embed-responsive-4by3"><iframe id="website" class="embed-responsive-item" src="'+t[0]+'" sandbox frameborder="0"></iframe></div>',t[0],t[1],t[2]),viewer.modal("show")});
jQuery().searcher&&($("#listr-table").searcher({inputSelector:"#listr-search"}),$("#listr-search").keyup(function(e){27==e.keyCode&&$(this).val("")}));
if(jQuery().stupidtable){var table=$("#listr-table").stupidtable();table.bind("aftertablesort",function(t){countRows()})}